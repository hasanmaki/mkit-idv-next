handlers:
  - sink: ext://sys.stdout
    format: "<green>{time:YYYY-MM-DD HH:mm:ss.SSS}</green> | <level>{level: <8}</level> | <cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> | <dim>{extra[trace_id]}</dim> | <blue>{extra[layer]}</blue> | <level>{message}</level>"
    enqueue: false
    diagnose: true
    backtrace: true
    colorize: true
    level: DEBUG

  - sink: "./logs/app.log"
    format: "{time:YYYY-MM-DD HH:mm:ss} | {level} | {message}"
    level: INFO
    colorize: false
    serialize: true
    enqueue: true
    rotation: "10 MB"
    retention: "7 days"

  - sink: "./logs/error.log"
    format: "{time:YYYY-MM-DD HH:mm:ss} | {level} | {message}"
    level: ERROR
    colorize: false
    serialize: true
    enqueue: true
    rotation: "10 MB"
    retention: "7 days"

extra:
  context: "mkit"
  trace_id: "-"
  layer: "app"

activation:
  - ["httpx_retries", false]
  - ["httpcore", true]
  - ["httpx", false]
  - ["uvicorn", false]
  - ["aiosqlite", false]
